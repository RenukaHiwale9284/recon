<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">

	<h:head>
		<h:outputStylesheet library="webjars" name="primeflex/2.0.0/primeflex.min.css" />
	</h:head>

	<h:body style="margin-left:50px">

		<style type="text/css">
			button.ui-button { margin-right: .5rem;}
			.dialog-style-class { width: 50%; height: 70%;}

			}
		</style>

		<h:form id="form">

			<p:growl id="msgs" />

			<div class="card">

					<p:toolbar rendered="true">
						<p:toolbarGroup>
							<p:commandLink style="margin-right:20px;" id="reset" value="Reset" icon="pi pi-search" action="#{preview.reset}" disabled="false" update="datatabs msgs" />
							<p:commandLink style="margin-right:20px;" id="validate" value="Validate" icon="pi pi-search" action="#{preview.validate}" disabled="true" update="datatabs msgs" />
							<p:commandLink style="margin-right:20px;" id="approve" value="Approve" icon="pi pi-search" action="#{preview.approve}" disabled="false" update="datatabs msgs" />
							<p:commandLink style="margin-right:20px;" id="proceed" value="Proceed To next stage" icon="pi pi-search" ajax="false" action="#{preview.proceed}" disabled="false" update="datatabs msgs"/>
								
							<p:commandLink style="margin-right:20px;" id="logout" value="Log out" action="#{father.logout}" oncomplete="window.open('home.xhtml','_self')"/>
								
								
						</p:toolbarGroup>

						<p:toolbarGroup>
							<p:splitButton value="Reload" oncomplete="window.open('preview.xhtml')" icon="pi pi-save">
								<p:submenu label="Navigations">

									<p:menuitem value="Data Load" onclick="window.open('rdata.xhtml','_self')" ajax="true" />

									<p:menuitem value="Name Mapping" onclick="window.open('rnames.xhtml','_self')" ajax="true"/>

									<p:menuitem value="Reonciliation" onclick="window.open('rboard6.xhtml','_self')" ajax="true"/>

									<p:menuitem value="Preview" onclick="window.open('preview.xhtml','_self')" ajax="true"/>

									<p:menuitem value="Tax computation" onclick="window.open('tboard3.xhtml','_self')" ajax="true"/>

								</p:submenu>
							</p:splitButton>
						</p:toolbarGroup>
					</p:toolbar>





				<p:steps activeIndex="3">
					<p:menuitem value="Document Upload" />
					<p:menuitem value="Name mapping" />
					<p:menuitem value="Reconciliation" />
					<p:menuitem value="Review" />
					<p:menuitem value="Tax Positions" />
					<p:menuitem value="Generate" />

				</p:steps>


			</div>

			<div class="card">
				<p:tabView id="datatabs">
					<p:ajax event="tabChange" listener="#{preview.onTabChange}" update=":form:msgs" />
					<p:ajax event="tabClose" listener="#{preview.onTabClose}" update=":form:msgs" />


					<p:tab title="Splited Parties">
						<div class="card">

							<p:dataTable id="splittable" var="t" value="#{preview.splits}" sortBy="#{t.partyName}" editable="true" style="margin-bottom:20px" rows="10" paginator="true"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" rowsPerPageTemplate="5,10,{ShowAll|'All'}" paginatorAlwaysVisible="false" paginatorPosition="bottom">
								>


								<p:column headerText="Party" sortBy="#{t.partyName}" filterBy="#{t.partyName}">
									<h:outputText value="#{t.partyName}" />
								</p:column>

								<p:column headerText="TDS">
									<h:outputText value="#{t.tdsDeposited}"> 
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
										
								</p:column>


								<p:column headerText="26AS Income">
									<h:outputText value="#{t.source1Amount}" > 
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
									
								</p:column>

								<p:column headerText="Sales Register Income">
									<h:outputText value="#{t.source2Amount}" > 
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="Related Party Income">
									<h:outputText value="#{t.source3Amount}">
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
									
								</p:column>

								<p:column headerText="Nature">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{t.nature}" />
										</f:facet>
										<f:facet name="input">
											<p:selectOneMenu value="#{t.nature}">
												<f:selectItems value="#{ref.defNatures}" var="nature" itemLabel="#{nature}" itemValue="#{nature}" />
											</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>




								<p:column headerText="Final Income">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{t.finalIncome}">
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
											</h:outputText>
										</f:facet>
										<f:facet name="input">
											<p:inputNumber value="#{t.finalIncome}" style="width:100%" label="Final Income" />
										</f:facet>
									</p:cellEditor>
								</p:column>



								<p:column headerText="Final Tax">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{t.finalTax}">
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
											</h:outputText>
										</f:facet>
										<f:facet name="input">
											<p:inputNumber value="#{t.finalTax}" style="width:100%" label="Final Tax" />
										</f:facet>
									</p:cellEditor>
								</p:column>



								<p:column style="width:6rem">
									<p:rowEditor editTitle="Edit Row" cancelTitle="Cancel Edit" saveTitle="Save Row" />
								</p:column>




							</p:dataTable>

						</div>


					</p:tab>



					<p:tab title="Non split Party">

						<div class="card">

							<p:dataTable id="nonsplittable" var="t" value="#{preview.nonsplits}" sortBy="#{t.partyName}" editable="true" style="margin-bottom:20px" rows="10" paginator="true"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" rowsPerPageTemplate="5,10,{ShowAll|'All'}" paginatorAlwaysVisible="false" paginatorPosition="bottom">
								>


								<p:column headerText="Party" sortBy="#{t.partyName}" filterBy="#{t.partyName}">
									<h:outputText value="#{t.partyName}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="TDS">
									<h:outputText value="#{t.tdsDeposited}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>


								<p:column headerText="26AS Income">
									<h:outputText value="#{t.source1Amount}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="Sales Register Income">
									<h:outputText value="#{t.source2Amount}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="Related Party Income">
									<h:outputText value="#{t.source3Amount}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="Nature">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{t.nature}" />
										</f:facet>
										<f:facet name="input">
											<p:selectOneMenu value="#{t.nature}">
												<f:selectItems value="#{ref.defNatures}" var="nature" itemLabel="#{nature}" itemValue="#{nature}" />
											</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>




								<p:column headerText="Final Income">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{t.finalIncome}">
			                 		           <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
												
											</h:outputText>
										</f:facet>
										<f:facet name="input">
											<p:inputNumber value="#{t.finalIncome}" style="width:100%" label="Final Income" />
										</f:facet>
									</p:cellEditor>
								</p:column>



								<p:column headerText="Final Tax">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{t.finalTax}">
			  		                          <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
											</h:outputText>
										</f:facet>
										<f:facet name="input">
											<p:inputNumber value="#{t.finalTax}" style="width:100%" label="Final Tax" />
										</f:facet>
									</p:cellEditor>
								</p:column>



								<p:column style="width:6rem">
									<p:rowEditor editTitle="Edit Row" cancelTitle="Cancel Edit" saveTitle="Save Row" />
								</p:column>




							</p:dataTable>

						</div>


					</p:tab>



					<p:tab title="Carry Forward Transactions">
						<div class="card">

							<p:dataTable id="carrytable" var="t" value="#{preview.carryforward}" sortBy="#{t.partyName}" editable="true" style="margin-bottom:20px" rows="10" paginator="true"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" rowsPerPageTemplate="5,10,{ShowAll|'All'}" paginatorAlwaysVisible="false" paginatorPosition="bottom">
								>


								<p:column headerText="Party" sortBy="#{t.partyName}" filterBy="#{t.partyName}">
									<h:outputText value="#{t.partyName}" />
								</p:column>

								<p:column headerText="TDS">
									<h:outputText value="#{t.tdsDeposited}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>


								<p:column headerText="26AS Income">
									<h:outputText value="#{t.source1Amount}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="Sales Register Income">
									<h:outputText value="#{t.source2Amount}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="Related Party Income">
									<h:outputText value="#{t.source3Amount}" >
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
									</h:outputText>
									
								</p:column>

								<p:column headerText="Nature">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{t.nature}" />
										</f:facet>
										<f:facet name="input">
											<p:selectOneMenu value="#{t.nature}">
												<f:selectItems value="#{ref.defNatures}" var="nature" itemLabel="#{nature}" itemValue="#{nature}" />
											</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>


								<p:column headerText="Reason">
									<h:outputText value="#{t.reason}" />
								</p:column>
	
								<p:column style="width:6rem">
									<p:rowEditor editTitle="Edit Row" cancelTitle="Cancel Edit" saveTitle="Save Row" />
								</p:column>

							</p:dataTable>

						</div>


					</p:tab>




					<p:tab title="Refund data">


						<div class="card">
							<p:dataTable id="regundtable" var="p" value="#{preview.refunddata}" editable="true" style="margin-bottom:20px" rows="10" paginator="true"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records" rowsPerPageTemplate="5,10,{ShowAll|'All'}" widgetVar="RefundTable" paginatorAlwaysVisible="false"
								paginatorPosition="bottom">

								<p:column headerText="Sr.No.">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{p.srNo}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText id="modelInput" value="#{p.srNo}" style="width:100%" />
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column headerText="Assessment Year" >
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{p.assessmentYear}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText value="#{p.assessmentYear}" style="width:100%" label="Name" />
										</f:facet>
									</p:cellEditor>
								</p:column>

								<p:column headerText="Mode" >
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{p.mode}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText value="#{p.mode}" style="width:100%" label="Name" />
										</f:facet>
									</p:cellEditor>
								</p:column>



								<p:column headerText="Nature" >
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{p.nature}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText value="#{p.nature}" style="width:100%" label="Name" />
										</f:facet>
									</p:cellEditor>
								</p:column>


								<p:column headerText="Amount of Refund">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{p.amountOfRefund}">
			                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
											</h:outputText>
										</f:facet>
										<f:facet name="input">
											<p:inputNumber value="#{p.amountOfRefund}" style="width:100%" label="Amount of Refund" />
										</f:facet>
									</p:cellEditor>
								</p:column>


								<p:column headerText="Interest">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{p.interest}">
					                            <f:convertNumber type="currency" currencySymbol="rs" currencyCode="INR"/>
											
											</h:outputText>
												
											
										</f:facet>
										<f:facet name="input">
											<p:inputNumber value="#{p.interest}" style="width:100%" label="Interest" />
										</f:facet>
									</p:cellEditor>
								</p:column>


								<p:column headerText="Date of Refund">
									<p:cellEditor>
										<f:facet name="output">
											<h:outputText value="#{p.remarks}" />
										</f:facet>
										<f:facet name="input">
											<p:inputText value="#{p.remarks}" style="width:100%" label="Remark" />
										</f:facet>
									</p:cellEditor>
								</p:column>


							</p:dataTable>
						</div>



					</p:tab>


				</p:tabView>
			</div>


		</h:form>


	</h:body>
</html>

