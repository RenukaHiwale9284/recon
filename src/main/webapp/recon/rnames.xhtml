<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">

	<h:head>
		<h:outputStylesheet library="webjars" name="primeflex/2.0.0/primeflex.min.css" />
	</h:head>

	<h:body style="margin-left:50px">

		<style type="text/css">
			button.ui-button {
			margin-right: .5rem;
			}

			.dialog-style-class {
			width: 50%;
			height: 70%;
			}
		</style>

		<h:form id="form">

			<p:growl id="msgs" />

			<div class="card">

				<p:outputPanel id="gactions">`	
					<div class="card">


					<p:toolbar rendered="true">
						<p:toolbarGroup>
						
							<p:commandLink style="margin-right:20px;" id="reset" value="Reset" icon="pi pi-search" action="#{nview.reset}" disabled="false" update="form" />
							
							<p:commandLink style="margin-right:20px;" id="validate" value="Validate" icon="pi pi-search" action="#{nview.validate}" disabled="true" update="form" />
	
							<p:commandLink style="margin-right:20px;" id="approve" value="Approve" icon="pi pi-search" action="#{nview.approve}" disabled="false" update="msgs" />
	
							<p:commandLink style="margin-right:20px;" id="proceed" value="Proceed To next stage" icon="pi pi-search" ajax="false" action="#{nview.proceed}" disabled="false" update="datatabs"
								oncomplete="window.open('rboard6.xhtml')" />
								
							<p:commandLink style="margin-right:20px;" id="logout" value="Log out" action="#{father.logout}" oncomplete="window.open('home.xhtml','_self')"/>
								
								
						</p:toolbarGroup>

						<p:toolbarGroup>
							<p:splitButton value="Reload" oncomplete="window.open('preview.xhtml')">
								<p:submenu label="Navigations">

									<p:menuitem value="Data Load" onclick="window.open('rdata.xhtml','_self')" ajax="true" />
									
									<p:menuitem value="Name Mapping" onclick="window.open('rnames.xhtml','_self')" ajax="true"/>
									
									<p:menuitem value="Reonciliation" onclick="window.open('rboard6.xhtml','_self')" ajax="true"/>
									
									<p:menuitem value="Preview" onclick="window.open('preview.xhtml','_self')" ajax="true"/>
									
									<p:menuitem value="Tax computation" onclick="window.open('tboard3.xhtml','_self')" ajax="true"/>

								</p:submenu>
															</p:splitButton>
						</p:toolbarGroup>
					</p:toolbar>
						<p:steps activeIndex="1">
							<p:menuitem value="Document Upload" />
							<p:menuitem value="Name mapping" />
							<p:menuitem value="Reconciliation" />
							<p:menuitem value="Review" />
							<p:menuitem value="Tax Positions" />
							<p:menuitem value="Generate" />

						</p:steps>
					</div>
				</p:outputPanel>

			</div>

			<div class="card">


				<p:panelGrid columns="1" id="allNames">


					<p:column>

						<div class="p-formgrid p-grid">

							<div class="p-field p-col-5">

								<p:outputPanel>
									<p:dataTable id="pendingNames" var="n" value="#{nview.nameMap}" scrollable="true" scrollHeight="600" selection="#{nview.selectedNames}" editable="true" style="margin-bottom:20px"
										rowKey="#{n.id}">

										<p:column selectionMode="multiple" />

										<p:ajax event="rowEdit" listener="#{nview.onRowEdit}" update="pendingNames" process="@this" />
										<p:ajax event="rowEditCancel" listener="#{nview.onRowCancel}" update="pendingNames" process="@this" />


										<f:facet name="header">
											Company Name Mapping
										</f:facet>

										<p:column headerText="Company">
											<h:outputText value="#{n.name}" />
										</p:column>

										<p:column headerText="Source">
											<h:outputText value="#{n.source}" />
										</p:column>


										<p:column headerText="Available compaines as per 26AS">
											<p:cellEditor>
												<f:facet name="output">
													<h:outputText value="#{n.newName}" />
												</f:facet>
												<f:facet name="input">

													<p:selectOneMenu value="#{n.newName}" style="width:100%">
														<f:selectItems value="#{nview.rightNames}" var="name" itemLabel="#{name}" itemValue="#{name}" />
													</p:selectOneMenu>

												</f:facet>
											</p:cellEditor>
										</p:column>

										<p:column style="width:6rem">
											<p:rowEditor editTitle="Edit Row" cancelTitle="Cancel Edit" saveTitle="Save Row" />
										</p:column>



									</p:dataTable>

									<p:commandButton id="newcompanybutton" value="Add without Mapping"  action="#{nview.createNewName}" update="form pendingNames :form:allNames" />
									<p:commandButton id="refresh" value="Add with Mapping"  action="#{nview.refresh}" update="form pendingNames" />
								</p:outputPanel>

							</div>

							<div class="p-field p-col-7">


								<p:outputPanel>
									<p:dataTable id="nameset" var="n" value="#{nview.nameset}" selectionMode="single" scrollable="true" scrollHeight="600" selection="#{nview.selectedNameSet}" editable="true"
										style="margin-bottom:20px" rowKey="#{n.nameid}">

										<f:facet name="header">
											Final Company names
										</f:facet>
										<p:column headerText="26AS">
											<h:outputText value="#{n.name26as}" />
										</p:column>

										<p:column headerText="Sales Register">
											<h:outputText value="#{n.namesr}" />
										</p:column>


										<p:column headerText="Related Party">
											<h:outputText value="#{n.namertp}" />
										</p:column>


									</p:dataTable>

									<p:commandButton id="refresh2" value="Refresh"  action="#{nview.refresh2}" update="form allNames" />

								</p:outputPanel>

							</div>
						</div>

					</p:column>





				</p:panelGrid>
			</div>


		</h:form>


	</h:body>
</html>

