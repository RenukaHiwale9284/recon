<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">

	<h:head>
		<h:outputStylesheet library="webjars" name="primeflex/2.0.0/primeflex.min.css" />
	</h:head>

	<h:body style="margin-left:50px">

		<style type="text/css">
			button.ui-button { margin-right: .5rem;}
			.dialog-style-class { width: 50%; height: 70%;}
			}
		</style>

		<h:form id="form">

			<p:growl id="messages" showDetail="true" />

			<div class="card">

				<p:toolbar rendered="true">
					<p:toolbarGroup>
						<p:commandLink style="margin-right:20px;" id="reset" value="Reset" icon="pi pi-search"   action="#{gview.archieve}" disabled="false" update="datatabs messages" />
						<p:commandLink style="margin-right:20px;" id="validate" value="Validate" icon="pi pi-search" action="#{gview.validate}" disabled="true" update="datatabs" />
						<p:commandLink style="margin-right:20px;" id="approve" value="Approve" icon="pi pi-search" action="#{gview.approve}" disabled="true" update="datatabs " />
						<p:commandLink style="margin-right:20px;" id="proceed" value="Proceed To next stage" icon="pi pi-search" ajax="false" action="#{gview.proceed}" disabled="true" update="datatabs"
							oncomplete="window.open('rnames.xhtml')" />
						<p:commandLink style="margin-right:20px;" id="logout" value="Log out" action="#{father.logout}" oncomplete="window.open('home.xhtml','_self')" />
					</p:toolbarGroup>


					<p:toolbarGroup>

						<p:splitButton value="Reload" icon="pi pi-save">
							<p:submenu label="Navigations">

								<p:menuitem value="Data Load" onclick="window.open('rdata.xhtml','_self')" ajax="true" />

								<p:menuitem value="Name Mapping" onclick="window.open('rnames.xhtml','_self')" ajax="true" />

								<p:menuitem value="Reonciliation" onclick="window.open('rboard6.xhtml','_self')" ajax="true" />

								<p:menuitem value="Preview" onclick="window.open('preview.xhtml','_self')" ajax="true" />

								<p:menuitem value="Tax computation" onclick="window.open('tboard3.xhtml','_self')" ajax="true" />

								<p:menuitem value="Generate" onclick="window.open('gview.xhtml','_self')" ajax="true" />

							</p:submenu>

						</p:splitButton>
					</p:toolbarGroup>
				</p:toolbar>

				<p:steps activeIndex="5">
					<p:menuitem value="Document Upload" />
					<p:menuitem value="Name mapping" />
					<p:menuitem value="Reconciliation" />
					<p:menuitem value="Review" />
					<p:menuitem value="Tax Positions" />
					<p:menuitem value="Generate" />
				</p:steps>

			</div>

			<div class="card">
				<p:tabView id="datatabs">

					<p:tab title="ITR6 Generation">

						<div class="card">
							<div class="p-formgrid p-grid">

								<div class="p-field p-col-5">

									<p:accordionPanel widgetVar="basic">
										<p:tab title="Step 1 - Upload ITR6 XML File">
											<p class="p-m-">
												Kindly upload the valid ITR6 xml file. No other format file is expected for ITR6 is expected in the system. 
												Once file is upload System will extract all client information and stores in the database. All the itr6 extracted data
												are partiotined project wise. Right side area shows all the individual tables from itr6 tables. Data length column shows 
												actual data rows available in the xml file.
											</p>
											<h:form enctype="multipart/form-data">

												<div class="p-field p-col-12">

													<p:fileUpload listener="#{gview.handleFileUploadITR}" label="Upload Itr6 xml" mode="advanced" dragDropSupport="false" update=":form:messages :form:datatabs"
														fileLimit="3" allowTypes="/(\.|\/)(xml)$/" accept=".xml">
													</p:fileUpload>
												</div>
											</h:form>
										</p:tab>

										<p:tab title="Step 2 - Download ITR6 Empty Template File">
										
										<p class="p-m-0">
										
												Kindly download the empty template file if at least one of the 'To Be Added' is non-zero. Once you click download 
												then the recent version of ITR6 template is downloaded on the browser.
												</p>
											<div class="p-field p-col-12">
												<p:commandLink value="Download Empty Template" ajax="false" icon="pi pi-arrow-down" styleClass="p-mr-2">
													<p:fileDownload value="#{gview.itr6TemplateStreamedFile}" />
												</p:commandLink>
											</div>
											
											<p class="p-m-0">										
												Kindly download Tax computation CSV file.
											</p>
								
											<div class="p-field p-col-12">
												<p:commandLink value="Download Tax Computation" ajax="false" icon="pi pi-arrow-down" styleClass="p-mr-2">
													<p:fileDownload value="#{taxview.exportFile}" />
												</p:commandLink>
											</div>
											

										</p:tab>

										<p:tab title="Step 3 - Add rows in the ITR6 empty template">

											<p class="p-m-0">
												Open the downloaded excel template file. Review the table at right hand side. Identify Tab and table for every 
												non-zero value of 'To Be Added' column. Go to the same tab and search table for addition of row. Add respective number
												of rows as mentioned in table at right hand side. Store the template files after addition of all the rows.

											</p>
										</p:tab>


										<p:tab title="Step 4 - Upload modified ITR6 excel template">
											<p class="p-m-0">
												Upload the modified ITR6 excel template. ITR6 template should be modified as per Step 3.
							

											</p>

											<h:form enctype="multipart/form-data">
												<div class="p-field p-col-12">
													<p:fileUpload listener="#{gview.handleFileUploadTemplate}" label="Upload template" mode="advanced" dragDropSupport="false" update=":form:messages :form:datatabs"
														 fileLimit="3" allowTypes="/(\.|\/)(xlsm)$/" accept=".xlsm">

													</p:fileUpload>
												</div>
											</h:form>
										</p:tab>


										<p:tab title="Step 5 - Generate ITR6 File">
											<p class="p-m-0">
												Generate ITR6 file. Template uploaded in the step 4 will be filled with all the extracted data from the ITR6 xml file.
												
											</p>
											<div class="p-field p-col-12">
											
												<p:commandButton value="Generate ITR6 File" ajax="false"  styleClass="p-mr-2" action="#{gview.generateITR6}"/>

											</div>
										</p:tab>


										<p:tab title="Step 6 - Downdload final ITR6 file">

											<p class="p-m-0">
												Download the generated ITR6 file. If user didn't follow step 5 then previously generated ITR6 will be available 
												for download. If no ITR6 is generated then this operation doesn't download any file.												
											</p>
											
											<div class="p-field p-col-12">
												<p:commandLink value="Download Final ITR6 File" ajax="false" icon="pi pi-arrow-down" styleClass="p-mr-2" >
													<p:fileDownload value="#{gview.itr6GeneratedStreamedFile}" />
												</p:commandLink>
											</div>


										</p:tab>


									</p:accordionPanel>



								</div>

								<div class="p-field p-col-7">

									<div class="card">

										<p:dataTable id="tableconfig" var="t" value="#{gview.tableConfig}" sortBy="#{t.partyName}" 
										scrollable="true" scrollHeight="500" style="margin-bottom:20px" howGridlines="true" 
										     resizableColumns="true" resizeMode="fit">

											<p:column headerText="Tab" width="30%">
												<h:outputText value="#{t.tab}" />
											</p:column>

											<p:column headerText="Table Name" width="40%">
												<h:outputText value="#{t.tableName}" />
											</p:column>

											<p:column headerText="Default" width="10%">
												<h:outputText value="#{t.length}" />
											</p:column>

											<p:column headerText="Data" width="10%">
												<h:outputText value="#{t.data_length}" />
											</p:column>

											<p:column headerText="To be Added" width="10%">
												<h:outputText value="#{t.offset}" />
											</p:column>

										</p:dataTable>
										
									</div>
								</div>
							</div>
						</div>

					</p:tab>

				</p:tabView>
			</div>


		</h:form>


	</h:body>
</html>

